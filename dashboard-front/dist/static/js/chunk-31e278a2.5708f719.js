(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31e278a2"],{1310:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"c",function(){return l}),a.d(t,"e",function(){return s}),a.d(t,"b",function(){return r}),a.d(t,"d",function(){return c});var i=a("b775"),n=window.location.pathname;function o(e){return Object(i["a"])({url:n+"/mongo/command/execute",method:"post",data:e})}function l(){return console.log(n),Object(i["a"])({url:n+"/mongo/getCollectionList",method:"get"})}function s(e,t){return Object(i["a"])({url:n+"/mongo/getEntityNumBySkill",method:"get",params:{skillId:e,skillVersion:t}})}function r(){return Object(i["a"])({url:n+"/mongo/getAttributesByName",method:"get"})}function c(){return Object(i["a"])({url:n+"/mongo/getCurrentKnowledgeVersion",method:"get"})}n.length>0&&"/"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1))},"2f21":function(e,t,a){"use strict";var i=a("79e5");e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},"55dd":function(e,t,a){"use strict";var i=a("5ca1"),n=a("d8e8"),o=a("4bf8"),l=a("79e5"),s=[].sort,r=[1,2,3];i(i.P+i.F*(l(function(){r.sort(void 0)})||!l(function(){r.sort(null)})||!a("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),n(e))}})},"5bfb":function(e,t,a){"use strict";var i=a("b10f"),n=a.n(i);n.a},"7bdf":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_bar,expression:"loading_bar"},{name:"show",rawName:"v-show",value:e.commandShow,expression:"commandShow"}],attrs:{title:"快捷命令 Command",name:"1"}},[a("el-form",{ref:"form",attrs:{"label-position":"left",size:"small",inline:!0,"label-width":"80"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}}},["getEntityByNameAndSkill"===e.operateType?a("el-form-item",{attrs:{label:"name"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此处可填写多个name，请使用中文或英文逗号将多个name分隔开， eg：思必驰，高始兴",placement:"top"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1):e._e(),e._v(" "),"getEntityByNameAndSkill"===e.operateType?a("el-form-item",{attrs:{label:"skillId"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此处可填写多个skillId，请使用中文或英文逗号将多个skillId分隔开， eg：101165,101166",placement:"top"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.skillId,callback:function(t){e.skillId=t},expression:"skillId"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"getRuleById"===e.operateType,expression:"operateType === 'getRuleById'"}],attrs:{label:"ruleId"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleId,callback:function(t){e.ruleId=t},expression:"ruleId"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"getRuleById"===e.operateType,expression:"operateType === 'getRuleById'"}],attrs:{label:"Concept"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch},model:{value:e.ruleConcept,callback:function(t){e.ruleConcept=t},expression:"ruleConcept"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"getRuleById"===e.operateType,expression:"operateType === 'getRuleById'"}],attrs:{label:"Attribute"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.queryAttrs},model:{value:e.ruleAttr,callback:function(t){e.ruleAttr=t},expression:"ruleAttr"}})],1),e._v(" "),"getEntityNumBySkillVersion"===e.operateType?a("el-form-item",{attrs:{label:"skillID"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"根据填写skillID, 多个ID用逗号分隔",placement:"top"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.skillParam.skillId,callback:function(t){e.$set(e.skillParam,"skillId",t)},expression:"skillParam.skillId"}})],1)],1):e._e(),e._v(" "),"getEntityNumBySkillVersion"===e.operateType?a("el-form-item",{attrs:{label:"skillVersion"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"根据所选查询依据填写skillID 或 skillVersion，多个参数用逗号分隔",placement:"top"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.skillParam.skillVersion,callback:function(t){e.$set(e.skillParam,"skillVersion",t)},expression:"skillParam.skillVersion"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"getAttributesByName"===e.operateType,expression:"operateType === 'getAttributesByName'"}],attrs:{label:"conceptName"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch},on:{select:e.handleSelected},model:{value:e.conceptName,callback:function(t){e.conceptName=t},expression:"conceptName"}})],1),e._v(" "),"getAttributesByName"!==e.operateType?a("el-button",{staticStyle:{"text-align":"right"},attrs:{type:"primary",icon:"el-icon-search",size:"mini",circle:""},on:{click:e.onSubmit}}):e._e()],1)],1),e._v(" "),a("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"结果 Results",name:"2"}},["getEntityNumBySkillVersion"===e.operateType?a("el-tag",{attrs:{type:"success"},domProps:{innerHTML:e._s("实体总数："+e.resultCount)}}):e._e(),e._v(" "),"getAttributesByName"===e.operateType?a("el-container",[a("el-aside",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"600px"},on:{"row-click":e.showAttr}},[a("el-table-column",{attrs:{prop:"attr",label:"属性"}})],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"editor-container"},[a("json-editor",{ref:"jsonEditor",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])],1):e._e(),e._v(" "),"getAttributesByName"!==e.operateType?a("div",{staticClass:"editor-container"},[a("json-editor",{ref:"jsonEditor",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()],1)],1)],1)},n=[],o=(a("55dd"),a("7f7f"),a("a481"),a("28a5"),a("fa7e")),l=a("1310"),s="{}",r={name:"index",components:{JsonEditor:o["a"]},data:function(){return{activeNames:["1","2"],operateType:"",loading:!1,loading_bar:!1,commandShow:!1,knowledgeVersion:"",name:"",skillId:"",ruleId:"",ruleConcept:"",ruleAttr:"",skillParam:{skillId:"",skillVersion:""},conceptName:"",form:{database:"kg",collection:"",operate:"",diagnostic:!1,filter:"",limit:0,skip:0},conceptList:"",jsonData:"",conceptScheme:"",attrName:"",tableData:[],resultCount:0,value:JSON.parse(s)}},watch:{jsonData:function(e,t){this.value=e},operateType:function(e,t){var a=this;this.jsonData=null,"getEntityByNameAndSkill"===this.operateType?this.commandShow=!0:"getEnableSkillCount"===this.operateType?(this.commandShow=!1,this.form.collection="skill",this.form.filter="{status: 'Enable'}",this.form.operate="count",this.excuteCommand(this.form)):"getRuleById"===this.operateType?(this.commandShow=!0,this.loading_bar=!0,this.getKnowledgeVersion(),Object(l["b"])().then(function(e){if(200===e.code){a.conceptScheme=e.data;var t=new Array;for(var i in e.data[0])t.push({value:i});a.conceptList=t}a.loading_bar=!1}).catch(function(e){console.log(e),a.loading=!1})):"getEntityNumBySkillVersion"===this.operateType?this.commandShow=!0:"getAttributesByName"===this.operateType&&(this.loading_bar=!0,this.commandShow=!0,Object(l["b"])().then(function(e){if(200===e.code){a.conceptScheme=e.data;var t=new Array;for(var i in e.data[0])t.push({value:i});a.conceptList=t}a.loading_bar=!1}).catch(function(e){console.log(e),a.loading=!1}))}},methods:{onSubmit:function(){var e=this;if("getEntityByNameAndSkill"===this.operateType){this.form.collection="entity",this.form.operate="find";for(var t=this.name.replace(/，/g,",").split(","),a="",i=0;i<t.length;i++)a=a+"'"+t[i]+"',";for(var n=this.skillId.replace(/，/g,",").split(","),o="",s=0;s<n.length;s++)o=o+"'"+n[s]+"',";null!==this.skillId&&""!==this.skillId?this.form.filter="{'bav2._identifiers.value.strings': {$in:["+a+"]}, 'skillId': {$in:["+o+"]}}":this.form.filter="{'bav2._identifiers.value.strings': {$in:["+a+"]}}",this.excuteCommand(this.form)}else"getRuleById"===this.operateType?(this.form.collection="rule",this.form.operate="find",""===this.ruleId?this.form.filter="{knowledgeVersion: '"+this.knowledgeVersion+"', ruleDefinition: {$regex: '.*"+this.ruleConcept+".*"+this.ruleAttr+".*'}}":this.form.filter="{knowledgeVersion: '"+this.knowledgeVersion+"', ruleId: '"+this.ruleId+"', ruleDefinition: {$regex: '.*"+this.ruleConcept+".*"+this.ruleAttr+".*'}}",this.excuteCommand(this.form)):"getEntityNumBySkillVersion"===this.operateType&&(this.loading=!0,Object(l["e"])(this.skillParam.skillId,this.skillParam.skillVersion).then(function(t){if(200===t.code){e.$message.success("执行成功"),e.jsonData=t.data;for(var a=0,i=0;i<t.data.length;i++)a+=t.data[i]["count"];e.resultCount=a}e.loading=!1}).catch(function(t){console.log(t),e.loading=!1}))},excuteCommand:function(e){var t=this;this.loading=!0,Object(l["a"])(this.form).then(function(e){200===e.code&&(t.$message.success("执行成功"),t.jsonData=e.data),t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},querySearch:function(e,t){var a=this.conceptList,i=e?a.filter(this.createFilter(e)):a;t(i)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},queryAttrs:function(e,t){var a=this.conceptScheme[0][this.ruleConcept];if(this.attrName="undefined"!==typeof a["attributes"]?"attributes":"undefined"!==typeof a["attributeSchemaMap"]?"attributeSchemaMap":"",""===this.attrName)this.$message.info("无法获取属性列表！");else{var i=new Array;for(var n in a[this.attrName])i.push({value:n});t(i)}},handleSelected:function(e){this.jsonData=this.conceptScheme[0][e.value];var t=new Array;if(this.attrName="undefined"!==typeof this.jsonData["attributes"]?"attributes":"undefined"!==typeof this.jsonData["attributeSchemaMap"]?"attributeSchemaMap":"",""===this.attrName)this.$message.info("无法获取属性列表！");else for(var a in this.jsonData[this.attrName])t.push({attr:a});this.sortByKey(t,"attr"),this.tableData=t},sortByKey:function(e,t){return e.sort(function(e,a){var i=e[t].toLowerCase(),n=a[t].toLowerCase();return i<n?-1:i>n?1:0})},showAttr:function(e){this.jsonData=this.conceptScheme[0][this.conceptName][this.attrName][e.attr]},getKnowledgeVersion:function(){var e=this;Object(l["d"])().then(function(t){e.knowledgeVersion=t.data})}},created:function(){var e=this.$route.path.split("/");this.operateType=e[e.length-1]}},c=r,u=(a("5bfb"),a("2877")),d=Object(u["a"])(c,i,n,!1,null,"ac7b01b4",null);t["default"]=d.exports},b10f:function(e,t,a){},b8b0:function(e,t,a){"use strict";var i=a("f84c"),n=a.n(i);n.a},f84c:function(e,t,a){},fa7e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"json-editor"},[a("textarea",{ref:"textarea"})])},n=[],o=a("56b3"),l=a.n(o);a("0dd0"),a("a7be"),a("acdf"),a("f9d4"),a("8822"),a("d2de");a("ae67");var s={name:"JsonEditor",props:["value"],data:function(){return{jsonEditor:!1}},watch:{value:function(e){var t=this.jsonEditor.getValue();e!==t&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var e=this;this.jsonEditor=l.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on("change",function(t){e.$emit("changed",t.getValue()),e.$emit("input",t.getValue())})},methods:{getValue:function(){return this.jsonEditor.getValue()}}},r=s,c=(a("b8b0"),a("2877")),u=Object(c["a"])(r,i,n,!1,null,"fad11014",null);t["a"]=u.exports}}]);