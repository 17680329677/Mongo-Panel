(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35874b99"],{"02f4":function(e,t,n){var i=n("4588"),a=n("be13");e.exports=function(e){return function(t,n){var r,o,l=String(a(t)),s=i(n),c=l.length;return s<0||s>=c?e?"":void 0:(r=l.charCodeAt(s),r<55296||r>56319||s+1===c||(o=l.charCodeAt(s+1))<56320||o>57343?e?l.charAt(s):r:e?l.slice(s,s+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var i=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var i=n("cb7c");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},1310:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return s});var i=n("b775");function a(e){return Object(i["a"])({url:"/mongo/command/execute",method:"post",data:e})}function r(){return Object(i["a"])({url:"/mongo/getCollectionList",method:"get"})}function o(e,t){return Object(i["a"])({url:"/mongo/getEntityNumBySkill",method:"get",params:{skillId:e,skillVersion:t}})}function l(){return Object(i["a"])({url:"/mongo/getAttributesByName",method:"get"})}function s(){return Object(i["a"])({url:"/mongo/getCurrentKnowledgeVersion",method:"get"})}},"214f":function(e,t,n){"use strict";n("b0c5");var i=n("2aba"),a=n("32e9"),r=n("79e5"),o=n("be13"),l=n("2b4c"),s=n("520a"),c=l("species"),u=!r(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=l(e),h=!r(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),p=h?!r(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!t}):void 0;if(!h||!p||"replace"===e&&!u||"split"===e&&!d){var m=/./[f],v=n(o,f,""[e],function(e,t,n,i,a){return t.exec===s?h&&!a?{done:!0,value:m.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),g=v[0],b=v[1];i(String.prototype,e,g),a(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"28a5":function(e,t,n){"use strict";var i=n("aae3"),a=n("cb7c"),r=n("ebd6"),o=n("0390"),l=n("9def"),s=n("5f1b"),c=n("520a"),u=n("79e5"),d=Math.min,f=[].push,h="split",p="length",m="lastIndex",v=4294967295,g=!u(function(){RegExp(v,"y")});n("214f")("split",2,function(e,t,n,u){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(a,e,t);var r,o,l,s=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,h=void 0===t?v:t>>>0,g=new RegExp(e.source,u+"g");while(r=c.call(g,a)){if(o=g[m],o>d&&(s.push(a.slice(d,r.index)),r[p]>1&&r.index<a[p]&&f.apply(s,r.slice(1)),l=r[0][p],d=o,s[p]>=h))break;g[m]===r.index&&g[m]++}return d===a[p]?!l&&g.test("")||s.push(""):s.push(a.slice(d)),s[p]>h?s.slice(0,h):s}:"0"[h](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,i){var a=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,a,i):b.call(String(a),n,i)},function(e,t){var i=u(b,e,this,t,b!==n);if(i.done)return i.value;var c=a(e),f=String(this),h=r(c,RegExp),p=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),y=new h(g?c:"^(?:"+c.source+")",m),k=void 0===t?v:t>>>0;if(0===k)return[];if(0===f.length)return null===s(y,f)?[f]:[];var x=0,w=0,S=[];while(w<f.length){y.lastIndex=g?w:0;var N,I=s(y,g?f:f.slice(w));if(null===I||(N=d(l(y.lastIndex+(g?0:w)),f.length))===x)w=o(f,w,p);else{if(S.push(f.slice(x,w)),S.length===k)return S;for(var E=1;E<=I.length-1;E++)if(S.push(I[E]),S.length===k)return S;w=x=N}}return S.push(f.slice(x)),S}]})},"2f21":function(e,t,n){"use strict";var i=n("79e5");e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},"520a":function(e,t,n){"use strict";var i=n("0bfb"),a=RegExp.prototype.exec,r=String.prototype.replace,o=a,l="lastIndex",s=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e[l]||0!==t[l]}(),c=void 0!==/()??/.exec("")[1],u=s||c;u&&(o=function(e){var t,n,o,u,d=this;return c&&(n=new RegExp("^"+d.source+"$(?!\\s)",i.call(d))),s&&(t=d[l]),o=a.call(d,e),s&&o&&(d[l]=d.global?o.index+o[0].length:t),c&&o&&o.length>1&&r.call(o[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)}),o}),e.exports=o},"55dd":function(e,t,n){"use strict";var i=n("5ca1"),a=n("d8e8"),r=n("4bf8"),o=n("79e5"),l=[].sort,s=[1,2,3];i(i.P+i.F*(o(function(){s.sort(void 0)})||!o(function(){s.sort(null)})||!n("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(r(this)):l.call(r(this),a(e))}})},"5bfb":function(e,t,n){"use strict";var i=n("b10f"),a=n.n(i);a.a},"5f1b":function(e,t,n){"use strict";var i=n("23c6"),a=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var r=n.call(e,t);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"7bdf":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_bar,expression:"loading_bar"},{name:"show",rawName:"v-show",value:e.commandShow,expression:"commandShow"}],attrs:{title:"快捷命令 Command",name:"1"}},[n("el-form",{ref:"form",attrs:{"label-position":"left",size:"small",inline:!0,"label-width":"80"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}}},["getEntityByNameAndSkill"===e.operateType?n("el-form-item",{attrs:{label:"name"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此处可填写多个name，请使用中文或英文逗号将多个name分隔开， eg：思必驰，高始兴",placement:"top"}},[n("el-input",{staticStyle:{width:"300px"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1):e._e(),e._v(" "),"getEntityByNameAndSkill"===e.operateType?n("el-form-item",{attrs:{label:"skillId"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此处可填写多个skillId，请使用中文或英文逗号将多个skillId分隔开， eg：101165,101166",placement:"top"}},[n("el-input",{staticStyle:{width:"300px"},model:{value:e.skillId,callback:function(t){e.skillId=t},expression:"skillId"}})],1)],1):e._e(),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"getRuleById"===e.operateType,expression:"operateType === 'getRuleById'"}],attrs:{label:"ruleId"}},[n("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleId,callback:function(t){e.ruleId=t},expression:"ruleId"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"getRuleById"===e.operateType,expression:"operateType === 'getRuleById'"}],attrs:{label:"Concept"}},[n("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch},model:{value:e.ruleConcept,callback:function(t){e.ruleConcept=t},expression:"ruleConcept"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"getRuleById"===e.operateType,expression:"operateType === 'getRuleById'"}],attrs:{label:"Attribute"}},[n("el-autocomplete",{attrs:{"fetch-suggestions":e.queryAttrs},model:{value:e.ruleAttr,callback:function(t){e.ruleAttr=t},expression:"ruleAttr"}})],1),e._v(" "),"getEntityNumBySkillVersion"===e.operateType?n("el-form-item",{attrs:{label:"skillID"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"根据填写skillID, 多个ID用逗号分隔",placement:"top"}},[n("el-input",{staticStyle:{width:"300px"},model:{value:e.skillParam.skillId,callback:function(t){e.$set(e.skillParam,"skillId",t)},expression:"skillParam.skillId"}})],1)],1):e._e(),e._v(" "),"getEntityNumBySkillVersion"===e.operateType?n("el-form-item",{attrs:{label:"skillVersion"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"根据所选查询依据填写skillID 或 skillVersion，多个参数用逗号分隔",placement:"top"}},[n("el-input",{staticStyle:{width:"300px"},model:{value:e.skillParam.skillVersion,callback:function(t){e.$set(e.skillParam,"skillVersion",t)},expression:"skillParam.skillVersion"}})],1)],1):e._e(),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"getAttributesByName"===e.operateType,expression:"operateType === 'getAttributesByName'"}],attrs:{label:"conceptName"}},[n("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch},on:{select:e.handleSelected},model:{value:e.conceptName,callback:function(t){e.conceptName=t},expression:"conceptName"}})],1),e._v(" "),"getAttributesByName"!==e.operateType?n("el-button",{staticStyle:{"text-align":"right"},attrs:{type:"primary",icon:"el-icon-search",size:"mini",circle:""},on:{click:e.onSubmit}}):e._e()],1)],1),e._v(" "),n("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"结果 Results",name:"2"}},["getEntityNumBySkillVersion"===e.operateType?n("el-tag",{attrs:{type:"success"},domProps:{innerHTML:e._s("实体总数："+e.resultCount)}}):e._e(),e._v(" "),"getAttributesByName"===e.operateType?n("el-container",[n("el-aside",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"600px"},on:{"row-click":e.showAttr}},[n("el-table-column",{attrs:{prop:"attr",label:"属性"}})],1)],1),e._v(" "),n("el-main",[n("div",{staticClass:"editor-container"},[n("json-editor",{ref:"jsonEditor",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])],1):e._e(),e._v(" "),"getAttributesByName"!==e.operateType?n("div",{staticClass:"editor-container"},[n("json-editor",{ref:"jsonEditor",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()],1)],1)],1)},a=[],r=(n("55dd"),n("7f7f"),n("a481"),n("28a5"),n("fa7e")),o=n("1310"),l="{}",s={name:"index",components:{JsonEditor:r["a"]},data:function(){return{activeNames:["1","2"],operateType:"",loading:!1,loading_bar:!1,commandShow:!1,knowledgeVersion:"",name:"",skillId:"",ruleId:"",ruleConcept:"",ruleAttr:"",skillParam:{skillId:"",skillVersion:""},conceptName:"",form:{database:"kg",collection:"",operate:"",diagnostic:!1,filter:"",limit:0,skip:0},conceptList:"",jsonData:"",conceptScheme:"",attrName:"",tableData:[],resultCount:0,value:JSON.parse(l)}},watch:{jsonData:function(e,t){this.value=e},operateType:function(e,t){var n=this;this.jsonData=null,"getEntityByNameAndSkill"===this.operateType?this.commandShow=!0:"getEnableSkillCount"===this.operateType?(this.commandShow=!1,this.form.collection="skill",this.form.filter="{status: 'Enable'}",this.form.operate="count",this.excuteCommand(this.form)):"getRuleById"===this.operateType?(this.commandShow=!0,this.loading_bar=!0,this.getKnowledgeVersion(),Object(o["b"])().then(function(e){if(200===e.code){n.conceptScheme=e.data;var t=new Array;for(var i in e.data[0])t.push({value:i});n.conceptList=t}n.loading_bar=!1}).catch(function(e){console.log(e),n.loading=!1})):"getEntityNumBySkillVersion"===this.operateType?this.commandShow=!0:"getAttributesByName"===this.operateType&&(this.loading_bar=!0,this.commandShow=!0,Object(o["b"])().then(function(e){if(200===e.code){n.conceptScheme=e.data;var t=new Array;for(var i in e.data[0])t.push({value:i});n.conceptList=t}n.loading_bar=!1}).catch(function(e){console.log(e),n.loading=!1}))}},methods:{onSubmit:function(){var e=this;if("getEntityByNameAndSkill"===this.operateType){this.form.collection="entity",this.form.operate="find";for(var t=this.name.replace(/，/g,",").split(","),n="",i=0;i<t.length;i++)n=n+"'"+t[i]+"',";for(var a=this.skillId.replace(/，/g,",").split(","),r="",l=0;l<a.length;l++)r=r+"'"+a[l]+"',";null!==this.skillId&&""!==this.skillId?this.form.filter="{'bav2._identifiers.value.strings': {$in:["+n+"]}, 'skillId': {$in:["+r+"]}}":this.form.filter="{'bav2._identifiers.value.strings': {$in:["+n+"]}}",this.excuteCommand(this.form)}else"getRuleById"===this.operateType?(this.form.collection="rule",this.form.operate="find",""===this.ruleId?this.form.filter="{knowledgeVersion: '"+this.knowledgeVersion+"', ruleDefinition: {$regex: '.*"+this.ruleConcept+".*"+this.ruleAttr+".*'}}":this.form.filter="{knowledgeVersion: '"+this.knowledgeVersion+"', ruleId: '"+this.ruleId+"', ruleDefinition: {$regex: '.*"+this.ruleConcept+".*"+this.ruleAttr+".*'}}",this.excuteCommand(this.form)):"getEntityNumBySkillVersion"===this.operateType&&(this.loading=!0,Object(o["e"])(this.skillParam.skillId,this.skillParam.skillVersion).then(function(t){if(200===t.code){e.$message.success("执行成功"),e.jsonData=t.data;for(var n=0,i=0;i<t.data.length;i++)n+=t.data[i]["count"];e.resultCount=n}e.loading=!1}).catch(function(t){console.log(t),e.loading=!1}))},excuteCommand:function(e){var t=this;this.loading=!0,Object(o["a"])(this.form).then(function(e){200===e.code&&(t.$message.success("执行成功"),t.jsonData=e.data),t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},querySearch:function(e,t){var n=this.conceptList,i=e?n.filter(this.createFilter(e)):n;t(i)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},queryAttrs:function(e,t){var n=this.conceptScheme[0][this.ruleConcept];if(this.attrName="undefined"!==typeof n["attributes"]?"attributes":"undefined"!==typeof n["attributeSchemaMap"]?"attributeSchemaMap":"",""===this.attrName)this.$message.info("无法获取属性列表！");else{var i=new Array;for(var a in n[this.attrName])i.push({value:a});t(i)}},handleSelected:function(e){this.jsonData=this.conceptScheme[0][e.value];var t=new Array;if(this.attrName="undefined"!==typeof this.jsonData["attributes"]?"attributes":"undefined"!==typeof this.jsonData["attributeSchemaMap"]?"attributeSchemaMap":"",""===this.attrName)this.$message.info("无法获取属性列表！");else for(var n in this.jsonData[this.attrName])t.push({attr:n});this.sortByKey(t,"attr"),this.tableData=t},sortByKey:function(e,t){return e.sort(function(e,n){var i=e[t].toLowerCase(),a=n[t].toLowerCase();return i<a?-1:i>a?1:0})},showAttr:function(e){this.jsonData=this.conceptScheme[0][this.conceptName][this.attrName][e.attr]},getKnowledgeVersion:function(){var e=this;Object(o["d"])().then(function(t){e.knowledgeVersion=t.data})}},created:function(){var e=this.$route.path.split("/");this.operateType=e[e.length-1]}},c=s,u=(n("5bfb"),n("2877")),d=Object(u["a"])(c,i,a,!1,null,"ac7b01b4",null);t["default"]=d.exports},a481:function(e,t,n){"use strict";var i=n("cb7c"),a=n("4bf8"),r=n("9def"),o=n("4588"),l=n("0390"),s=n("5f1b"),c=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};n("214f")("replace",2,function(e,t,n,m){return[function(i,a){var r=e(this),o=void 0==i?void 0:i[t];return void 0!==o?o.call(i,r,a):n.call(String(r),i,a)},function(e,t){var a=m(n,e,this,t);if(a.done)return a.value;var d=i(e),f=String(this),h="function"===typeof t;h||(t=String(t));var g=d.global;if(g){var b=d.unicode;d.lastIndex=0}var y=[];while(1){var k=s(d,f);if(null===k)break;if(y.push(k),!g)break;var x=String(k[0]);""===x&&(d.lastIndex=l(f,r(d.lastIndex),b))}for(var w="",S=0,N=0;N<y.length;N++){k=y[N];for(var I=String(k[0]),E=c(u(o(k.index),f.length),0),C=[],j=1;j<k.length;j++)C.push(p(k[j]));var _=k.groups;if(h){var A=[I].concat(C,E,f);void 0!==_&&A.push(_);var T=String(t.apply(void 0,A))}else T=v(I,f,E,C,_,t);E>=S&&(w+=f.slice(S,E)+T,S=E+I.length)}return w+f.slice(S)}];function v(e,t,i,r,o,l){var s=i+e.length,c=r.length,u=h;return void 0!==o&&(o=a(o),u=f),n.call(l,u,function(n,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(s);case"<":l=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>c){var f=d(u/10);return 0===f?n:f<=c?void 0===r[f-1]?a.charAt(1):r[f-1]+a.charAt(1):n}l=r[u-1]}return void 0===l?"":l})}})},b0c5:function(e,t,n){"use strict";var i=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},b10f:function(e,t,n){},b8b0:function(e,t,n){"use strict";var i=n("f84c"),a=n.n(i);a.a},f84c:function(e,t,n){},fa7e:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"json-editor"},[n("textarea",{ref:"textarea"})])},a=[],r=n("56b3"),o=n.n(r);n("0dd0"),n("a7be"),n("acdf"),n("f9d4"),n("8822"),n("d2de");n("ae67");var l={name:"JsonEditor",props:["value"],data:function(){return{jsonEditor:!1}},watch:{value:function(e){var t=this.jsonEditor.getValue();e!==t&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var e=this;this.jsonEditor=o.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on("change",function(t){e.$emit("changed",t.getValue()),e.$emit("input",t.getValue())})},methods:{getValue:function(){return this.jsonEditor.getValue()}}},s=l,c=(n("b8b0"),n("2877")),u=Object(c["a"])(s,i,a,!1,null,"fad11014",null);t["a"]=u.exports}}]);